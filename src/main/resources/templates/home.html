<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>用户demo</title>
        <!-- Tell the browser to be responsive to screen width -->
        <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
        <!-- Bootstrap 3.3.7 -->
        <link rel="stylesheet" href="../static/bower_components/bootstrap/dist/css/bootstrap.min.css">
        <!-- Font Awesome -->
        <link rel="stylesheet" href="../static/bower_components/font-awesome/css/font-awesome.min.css">
        <!-- Ionicons -->
        <link rel="stylesheet" href="../static/bower_components/Ionicons/css/ionicons.min.css">
        <!-- DataTables -->
        <link rel="stylesheet" href="../static/bower_components/datatables.net-bs/css/dataTables.bootstrap.min.css">
        <!-- Theme style -->
        <link rel="stylesheet" href="../static/dist/css/AdminLTE.min.css">
        <!-- AdminLTE Skins. Choose a skin from the css/skins
             folder instead of downloading all of them to reduce the load. -->
        <link rel="stylesheet" href="../static/dist/css/skins/_all-skins.min.css">
      
        <!-- Google Font -->
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic" th:href="@{https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic}"/>
        <!-- import map-->
        <link rel="stylesheet" href="https://cache.amap.com/lbs/static/main1119.css"/>
        <script src="https://cache.amap.com/lbs/static/es5.min.js"></script>
        <script src="https://webapi.amap.com/maps?v=1.4.8&key=d45e066e9d7b475ce397fc37e04aeef1&plugin=AMap.PlaceSearch,AMap.AdvancedInfoWindow"></script>
        <script src="https://cache.amap.com/lbs/static/addToolbar.js"></script>
      
        <!-- Google Font -->
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic" th:href="@{https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic}"/>
        
        <script>      var h="xx",m="xx",s="xx";      </script>
        <style>
            
            #alert{
                width: 90%;
                margin: auto;
                font-size: 10px;
                text-align: center;
                position: relative;
                display: none;
                z-index: 1000;
            }
            #alert-on{
                width: 90%;
                margin: auto;
                font-size: 24px;
                text-align: center;
                position: relative;
                display: none;
            }
            #alert-v{
                width: 90%;
                margin: auto;
                font-size: 24px;
                text-align: center;
                position: relative;
                display: none;
            }
            #alert-end{
                bottom: 0;
                width: 60%;
                margin: auto;
                font-size: 20px;
                text-align: center;
                position: relative;
                display: none;
            }
            #timer{
                background-color:khaki;
            }
            #button{
                width: 90px;
                height: 90px;
                border: 0px;
                border-radius: 55px;
                right: 24px;
                bottom: 24px;
                background-color: rgb(255, 160, 0);
                position: absolute;
                text-align: center;
                display: inline-flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                font-size: 23px;
                font-weight: bold;
                text-decoration: none;
                z-index: 999;
            }
            #button-on{
                width: 90px;
                height: 90px;
                border: 0px;
                border-radius: 55px;
                right: calc(40%);
                bottom: 24px;
                background-color: rgb(0, 160, 255);
                position: absolute;
                text-align: center;
                display: inline-flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                font-size: 23px;
                font-weight: bold;
                text-decoration: none;
                z-index: 998;
                line-height:20px;
            }
            #button-warn{
                width: 90px;
                height: 90px;
                border: 0px;
                border-radius: 55px;
                right: calc(70%);
                bottom: 24px;
                background-color: rgb(170, 43, 43);
                position: absolute;
                text-align: center;
                display: inline-flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                font-size: 23px;
                font-weight: bold;
                text-decoration: none;
                z-index: 998;
                
            }
            #button-end{
                width: 90px;
                height: 90px;
                border: 0px;
                border-radius: 55px;
                right: calc(40%);
                bottom: 24px;
                background-color:  rgb(0, 204, 255);
                position: absolute;
                text-align: center;
                display: none;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                font-size: 20px;
                font-weight: bold;
                text-decoration: none;
                z-index: 997;
                line-height:20px;
            }
         </style>
    </head>
<body class="hold-transition skin-blue sidebar-mini">
    <div class="wrapper">
      <header class="main-header">
        <!-- Logo -->
        <a href="../static/index2.html" class="logo">
          <!-- mini logo for sidebar mini 50x50 pixels -->
          <span class="logo-mini">后台</span>
          <!-- logo for regular state and mobile devices -->
          <span class="logo-lg">共享单车保险管理后台</span>
        </a>
        <!-- Header Navbar: style can be found in header.less -->
        <nav class="navbar navbar-static-top">
          <!-- Sidebar toggle button-->
          <a href="#" class="sidebar-toggle" data-toggle="push-menu" role="button">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>

          <div class="navbar-custom-menu">
            <ul class="nav navbar-nav">
              <!-- User Account: style can be found in dropdown.less -->
              <li class="dropdown user user-menu">

                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  <img src="../static/dist/img/user2-160x160.jpg" class="user-image" alt="User Image">
                  <span class="hidden-xs">JOSEE</span>
                </a>
                <ul class="dropdown-menu">
                  <!-- User image -->
                  <li class="user-header">
                    <img src="../static/dist/img/user2-160x160.jpg" class="img-circle" alt="User Image">
                    <div><font size="3" color="white">
                        <p><span>您剩余的保险期间倒计时 </span></p>
                        <span id="hours"><script>document.write(h);</script></span>
                        <span>:</span>
                        <span id="minute"><script>document.write(m);</script></span>
                        <span>:</span>  
                        <span id="second"><script>document.write(s);</script></span>
                    </font></div>
                  </li>
                  <!-- Menu Footer-->
                  <li class="user-footer">
                    <div style="margin:0 auto;width:50px;">
                      <a href="#" class="btn btn-default btn-flat">Sign out</a>
                    </div>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </nav>
      </header>
        <!-- Left side column. contains the logo and sidebar -->
       <aside class="main-sidebar">
                   <!-- sidebar: style can be found in sidebar.less -->
           <section class="sidebar">
               <!-- Sidebar user panel -->
               <div class="user-panel">
                   <div class="pull-left image">
                       <img src="../static/dist/img/user2-160x160.jpg" class="img-circle" alt="User Image">
                   </div>
                   <div class="pull-left info">
                       <p>JOSEE</p>
                       <a href="#"><i class="fa fa-circle text-success"></i> Online</a>
                   </div>
               </div>
               <!--图表统计-->
               <!--用户管理-->
               <!--地图功能页-->
               <!--设备列表+详情-->
               <!--报警记录列表+详情-->
               <!-- sidebar menu: : style can be found in sidebar.less -->
               <ul class="sidebar-menu" data-widget="tree">
                   <li class="header">MAIN NAVIGATION</li>
                   <li>
                       <a href="statistics">
                           <i class="fa fa-pie-chart"></i><span>图表统计</span>
                       </a>
                   </li>
                   <li>
                       <a href="map">
                           <i class="fa fa-map"></i><span>地图功能</span>
                       </a>
                   </li>
                   <li >
                       <a href="devicelist">
                           <i class="fa fa-files-o"></i><span>单车列表</span>
                       </a>
                   </li>
                   <li>
                       <a href="recordlist">
                           <i class="fa fa-edit"></i> <span>报警记录</span>
                       </a>
                   </li>
                   <li>
                       <a href="repairlist">
                           <i class="fa fa-wrench"></i> <span>维修记录</span>
                       </a>
                   </li>
                   <li>
                       <a href="userManagement">
                           <i class="fa fa-th"></i> <span>用户管理</span>
                       </a>
                   </li>
                   <li>
                        <a href="start">
                            <i class="fa fa-th"></i> <span>用户Demo</span>
                        </a>
                    </li>
               </ul>
           </section>
           <!-- /.sidebar -->
       </aside>

        <div class="content-wrapper">
            <section class="content">
                <div id="container"></div>

                <div id="alert" class="alert alert-info">
                        <p></p>
                        <p><font size=4>共享单车用户责任保险条款</font></p>                       
                        <p><font size=3>总则</font></p> 
                        <p align="left"><strong>第一条</strong>  本保险合同由保险条款、投保单、保险单、保险凭证组成。凡涉及本保险合同的约定，均应采用电子合同形式。</p>
                        <p align="left"><strong>第二条</strong>  凡使用本保险合同约定的共享单车公司所提供的单车，且受公司各类规则约束的自然人，均可作为投保人，向保险人投保本保险合同。</p>
                        <p align="left"><strong>第三条</strong>  本保险合同约定的共享单车公司，为本保险合同的被保险人。</p>
                        <p align="left"><strong>第四条</strong>  本保险的保险人是指共享单车保险股份有限公司</p>
                        <p align="left"><strong>第五条</strong> 本保险合同中的单车是指在中华人民共和国境内（不含港、澳、台地区）共享单车公司所拥有的共享单车。</p>
                        <p align="left">本保险合同中的共享单车称为被保险单车。</p>
                        <p align="left"><strong>第六条</strong> 本保险合同中的各方权利和义务，由保险人、投保人遵循公平原则协商确定。保险人、投保人自愿订立本保险合同。</p>
                        <p align="left">投保人应在保险合同成立时一次交清保险费。保险费未交清前，本保险合同不生效。</p>
                        <strong>
                        <p align="left"> ………………………………………………………………………………………………………………………………………………………………………………………………<p>
                        </strong>
                        
                        <form name="input" action="" method="get">
                        <input id="sb" type="checkbox"  value="correct"> 
                        我已阅读并了解《共享单车用户保证保险条款》
                        <p></p> 
                       <button type="button" id="btnout" class="btn btn-primary" onclick="out()">继续</button>
                    </div>
            
                    <button type="button" id="button-on" class="btn btn-primary" onclick="addon()"><span><p>开始</p><p>用车</p></span></button>
                    <button type="button" id="button-end" class="btn btn-primary" onclick="addend()"><span><p>结束</p><p>用车</p></span></button>
                    <button type="button" id="button" class="btn btn-primary" onclick="addview()"><span>投保</span></button>
                    <button type="button" id="button-warn" class="btn btn-primary" onclick="addv()"><span>报警</span></button>
                    <div id="alert-v" class="alert alert-info">
                            <p>已联系警方和保险公司！</p>
                        </div>
                    <div id="alert-on" class="alert alert-info">
                        <p>您的保险已过期，用车请先投保！</p>
                    </div>
            
                    <div id="alert-end" class="alert alert-info">
                        <p>您的当前位置不在指定停放区域内，强行停放属于违约行为，是否继续？</p>
                        <button type="button" id="btny" class="btn btn-primary" onclick="y()">确认</button>
                        <button type="button" id="btnn" class="btn btn-primary" onclick="n()">返回</button>
                    </div>
            </section>
            <!-- /.content -->
        </div>
        <!-- ./wrapper -->
    </div>
</body>
<script src="../static/bower_components/jquery/dist/jquery.min.js"></script>
<!-- Bootstrap 3.3.7 -->
<script src="../static/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<!-- Slimscroll -->
<script src="../static/bower_components/jquery-slimscroll/jquery.slimscroll.min.js"></script>
<!-- FastClick -->
<script src="../static/bower_components/fastclick/lib/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="../static/dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="../static/dist/js/demo.js"></script>

<script>
    h=0;m=0;s=0;
   if(window.location.href.split("=")[1]) h=window.location.href.split("=")[1];
    var lnglatXY;
    //初始化地
    var map = new AMap.Map('container', {
    	resizeEnable: true
    });
    //addCircle1();
    //addCircle2();
    AMap.event.addListener(map,'click',getLnglat); //点击事件
    function geocoder() {
        var MGeocoder;
        //加载地理编码插件
        map.plugin(["AMap.Geocoder"], function() {
            MGeocoder = new AMap.Geocoder({
                radius: 1000,
                extensions: "all"
            });
            //返回地理编码结果
            AMap.event.addListener(MGeocoder, "complete", geocoder_CallBack);
            //逆地理编码
            MGeocoder.getAddress(lnglatXY);
        });
        //加点
        var marker = new AMap.Marker({
            map:map,
            icon: new AMap.Icon({
                image: "http://webapi.amap.com/theme/v1.3/markers/n/mark_b.png",
                size:new AMap.Size(58,30),
            }),
            position: lnglatXY,
        });
        marker.setMap(map);
    }
    //回调函数
    function geocoder_CallBack(data) {
        var address;
        //返回地址描述
        address = data.regeocode.formattedAddress;
        //返回结果拼接输出
    }
    //鼠标点击，获取经纬度坐标
    function getLnglat(e){
        map.clearMap();
        addCircle1();
        addCircle2();
        var x = e.lnglat.getLng();
        var y = e.lnglat.getLat();
        lnglatXY = new AMap.LngLat(x,y);
        geocoder();
    }

    var Hours=h,
        Minute=m,
        Second=s,
        on=document.getElementById("button-on"),
        end=document.getElementById("button-end");
    var timer=null;
    if(Second < 10)	    second.innerText = "0" + Second;
    else	            second.innerText = Second;
    if(Minute < 10)     minute.innerText = "0" + Minute;
    else	            minute.innerText = Minute;
    if(Hours < 10)	    hours.innerText = "0" + Hours;
    else	            hours.innerText = Hours;

    function addview() {
		$("#alert").fadeIn("fast");
    }
    function out(){
        if (sb.checked) {
            window.location.href='insurance';
        }
       else {
            $("#alert").fadeOut("fast");
       }
    }
    //添加圆覆盖物
    function addCircle1() {
        circle1 = new AMap.Circle({
            center:new AMap.LngLat("121.37662200","31.673573500"),// 圆心位置
            radius:20 , //半径
            strokeColor: "#FFD700", //线颜色
            strokeOpacity: 1, //线透明度
            strokeWeight: 3, //线粗细度
            fillColor: "#FFFF00", //填充颜色
            fillOpacity: 0.35//填充透明度
        });
        circle1.setMap(map);
    }
    function addCircle2() {
        circle2 = new AMap.Circle({
            center:new AMap.LngLat("121.37962200","31.672523500"),// 圆心位置
            radius:20 , //半径
            strokeColor: "#FFD700", //线颜色
            strokeOpacity: 1, //线透明度
            strokeWeight: 3, //线粗细度
            fillColor: "#FFFF00", //填充颜色
            fillOpacity: 0.35//填充透明度
        });
        circle2.setMap(map);
    }
    function addon(){
        if(Hours==0&&Minute==0&&Second==0){
            $("#alert-on").fadeIn("fast");
            setTimeout(function(){
				$("#alert-on").fadeOut("slow");
			}, 2000);
        }
        else {
           use();
           on.style.display='none';
           end.style.display='inline-flex';
        }
    }
    function addv(){
        $("#alert-v").fadeIn("fast");
        setTimeout(function(){
			$("#alert-v").fadeOut("slow");
		}, 2000);
    }
    function addend(){
        if(circle1.contains(lnglatXY)||circle2.contains(lnglatXY)){
            clearInterval(timer);
            end.style.display='none';
            on.style.display='inline-flex';
        }
        else{
            $("#alert-end").fadeIn("fast");
        }
    }
    function y(){
        window.location.href="end";
    }
    function n(){
        setTimeout(function(){
				$("#alert-end").fadeOut("slow");
		}, 500);
    }
    function use(){
        var hours = document.getElementById("hours"),
            minute = document.getElementById("minute"),
            second = document.getElementById("second");
            timer = setInterval(function(){
            Second--;
            if(Hours==0 && Minute==0 && Second==0) clearInterval(timer);
            if(Second <0 ){
                Second = 59;
                Minute--;
                if(Minute < 0){
                    Minute = 59;
                    Hours--;
                }
            }
            if(Second < 10)	    second.innerText = "0" + Second;
            else	            second.innerText = Second;
            if(Minute < 10)     minute.innerText = "0" + Minute;
            else	            minute.innerText = Minute;
            if(Hours < 10)	    hours.innerText = "0" + Hours;
            else	            hours.innerText = Hours;
            },1000)
    }

</script>
</html>
